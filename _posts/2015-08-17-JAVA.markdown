---
layout: post
---

<h2>{{ page.title }}</h2>
<p class='meta'>{{ page.date | date_to_string }} - NanJing</p>

---

###jvm
不同操作系统指令集和数据结构存在差异，而jvm通过在操作系统上建立虚拟机，自己定义出来的一套统一的数据结构和操作指令，把同一套语言翻译给各大主流的操作系统，实现跨平台运行，这就是java一次编译到处运行的本质所在。

###栈
每个线程都有自己的栈，包含局部变量、执行环境和操作数栈，操作数栈用于存储所用操作数和结果。Stack代表一种运行时的状态，是运行时的单位，解决程序该如何执行的问题。

###堆
堆是存储的单位，解决数据存储的问题，用来存放对象信息。

###内存管理
对于栈的优化可以通过减少常量，参数的个数来减少栈的增长，在程序设计时，尽量把常量定义到一个对象中进行共享引用，比如String（不是基本类型）。另外少用递归调用也可以减少栈的占用。栈的空间有限，根据操作系统的不同，各个允许空间大小不同（大都在1M以内），当线程中计算所需的栈超过允许大小时，会抛出**StackOVerflowError**；当栈试图扩展时，没有足够的内存时，抛出**OutOfMemoryError**。  
堆异常有两种，**Out Of Memory(OOM)**和**Memory Link(ML)**，ML最终导致OOM。关于异常处理，确定OOM/ML后，一定要注意保护现场，可以dump heap或通过垃圾回收日志分析内存使用状况来确定问题所在。如果问题是OOM，一般通过增加Heap，物理内存来解决，ML则修改程序逻辑。
 
###垃圾回收
jvm中**标记垃圾**使用的算法是**根搜索算法**。简单地说，就是从一个叫GC Roots的对象开始，向下搜索，当一个对象不能到达Roots对象时，标记该对象可被回收。此算法优于**引用计数算法**，因为它避免了两个对象互相引用时无法被回收的现象。  



---

